# tiktok-companion

A Slack App providing a better TikTok integration

# Problem

When someone shares a TikTok link on Slack, if you're using the web or desktop version of Slack the preview generated by Slack does not contain a thumbnail. Not having a thumbnail makes it really hard to recall what the video was about when discussing in a thread. Only when using the mobile version the thumbnail is displayed. I use the web version all the time.

I'm not sure why the Slack client behaves this way, since clearly the 
thumbnail info is present and its displayed on the mobile client, but 
it's 
not something that you can configure either on your Slack preferences or the Slack Workspace preferences.

# Solution

This Slack App watches for TikTok links shared in any channel where you add it, and it adds the corresponding thumbnail to you can always have conversations with a better context.

# Demo

Before|After
-|-
<img src="demo/before.png" alt="Before" />|<img src="demo/after.png" alt="After" />

# Features

- [x] Display the thumbnail for TikTok links in chat
- [ ] Thumbnail link takes you to the TikTok video

# Configuration

1. Create a Slack app.
2. Add the following OAuth scopes in the OAuth settings page:

**Bot Token Scopes**
- channels:history
- chat:write
- groups:history
- im:history
- links.embed:write
- links:read
- links:write
- mpim:history

**User Token scopes**

- links.embed:write
- links:read

3. Enable event subscriptions
4. Add your /slack/events endpoint
5. Subscribe to bot events

- message.channels
- message.groups
- message.im
- message.mpim

6. Subscribe to events on behalf of users

- link_shared

7. Add **tiktok.com** to the app unfurl domains

Variable|Source
-|-
SLACK_BOT_TOKEN|_Slack Bot User OAuth Token_ in Slack App / OAuth settings
SLACK_APP_SECRET|_App signing secret_ Slack App / General settings

# Stack

## Runtime

- node@20

## Developer Experience

- TypeScript
- EditorConfig
- prettier
- Husky
- lint-staged
- commit-lint
- Changelog automation with semver + conventional changelog
